
# Go Modules, Go Sum, Go Vendor, and Git Tags

---

## 1. Go Modules (`go mod`)

Go modules are the way Go manages **dependencies** and **versioning**. Before modules, Go relied on `GOPATH`, which made dependency management difficult.  
With modules, every project has its own isolated dependency definitions, making builds **reproducible** and **portable**.

- **`go mod init <module-name>`** → Initializes a new module with the given name.
- **`go mod tidy`** → Ensures that your `go.mod` file matches the actual imports in your code by adding missing modules and removing unused ones.
- **`go get <dependency>`** → Downloads a new dependency or upgrades/downgrades an existing dependency to a specific version.
- **`go mod vendor`** → Copies all project dependencies into a local `vendor/` folder for offline usage or stricter builds.

### Example `go.mod` file (for UUID Generator library)
```go
module github.com/dwarakanathc100/uuid-generator

go 1.21.6

require github.com/google/uuid v1.6.0
```

---

## 2. `go.sum`

The `go.sum` file is automatically generated by Go and contains the **checksums (hash values)** of all dependencies listed in `go.mod`.  
Its purpose is to ensure **security and integrity**:

- Prevents dependency tampering by verifying cryptographic hashes.
- Ensures the same dependency version is always downloaded across environments.

Example entry inside `go.sum`:
```
github.com/google/uuid v1.6.0 h1:abcdxyz...
github.com/google/uuid v1.6.0/go.mod h1:efghijk...
```

This means if someone tries to replace the library with a modified version, Go will reject it due to checksum mismatch.

---

## 3. `go mod vendor`

The `vendor/` directory contains **local copies of all dependencies** used in your project.

Why is it useful?
- Ensures builds work without internet access.
- Provides a way to audit and review dependencies locally.
- Often used in enterprise environments where internet access is restricted.

Command:
```bash
go mod vendor
```
This creates a `vendor/` folder that holds all the project dependencies.  
When building with the `-mod=vendor` flag, Go uses the dependencies in this folder instead of downloading them.

---

## 4. Git Tags and Versioning

Git tags are used to mark **specific points in history** as important, usually for release versions.  
In Go modules, tags are critical because **Go resolves dependencies based on semantic versioning**.

- **Semantic Versioning (SemVer)** format: `vMAJOR.MINOR.PATCH`
  - **MAJOR** → Breaking changes
  - **MINOR** → New features, backward-compatible
  - **PATCH** → Bug fixes

### Commands
- **Create a new tag:**
```bash
git tag v1.0.0
git push origin v1.0.0
```
- **Update with a new version:**
```bash
git tag v1.0.1
git push origin v1.0.1
```

When another project imports your library, Go will fetch the version specified in their `go.mod` file.

---

## 5. Example: UUID Generator Module

### File: `generator/UUIDgenerator.go`
```go
package generator

import "github.com/google/uuid"

func GenerateUUID() string {
    return uuid.New().String()
}

func GenerateCusotmUUID() string {
    return "Custom" + uuid.New().String()
}
```

### Versions Created

- **Tag v1.0.0**
```go
func GenerateUUID() string {
    return uuid.New().String()
}
```

- **Tag v1.0.1**
```go
func GenerateUUID() string {
    return uuid.New().String()
}

func GenerateCusotmUUID() string { 
    return "Custom" + uuid.New().String()
}
```

This demonstrates how we can **add new functionality** and publish it as a new version.

---

## 6. Example: Consumer Module

### File: `main.go`
```go
package main

import (
    "fmt"
    "github.com/dwarakanathc100/uuid-generator/generator"
)

func main() {
    fmt.Println("Consuming custom-uuid!")
    uuid := generator.GenerateUUID()
    fmt.Println("Generated UUID:", uuid)
    fmt.Println("custom-uuid generator:", generator.GenerateCusotmUUID())
}
```

### Consumer `go.mod`
```go
module github.com/dwarakanathc100/uuid-consumer

go 1.21.6

require github.com/dwarakanathc100/uuid-generator v1.0.1
// require github.com/dwarakanathc100/uuid-generator v1.0.0

require github.com/google/uuid v1.6.0 // indirect
```

Here the consumer imports the module at a specific version (`v1.0.1`).  
If we uncomment the line for `v1.0.0`, the older version will be used.

---
### Reference repos
## https://github.com/dwarakanathc100/uuid-generator
## https://github.com/dwarakanathc100/uuid-consumer

## 7. Exercises 
1. **Creating Your Own Module**
   - Create a Go module called `calculator`.
   - Implement two functions: `Add(a, b int) int` and `Subtract(a, b int) int`.
   - Initialize it with `go mod init` and commit it to GitHub.

2. **Versioning with Git Tags**
   - Create version `v1.0.0` with only the `Add` function.
   - Add the `Subtract` function and tag the module as `v1.0.1`.
   - Push both tags to GitHub.

3. **Consumer Module**
   - Create a new Go module called `math-consumer`.
   - Import the `calculator` module at `v1.0.0` and use only the `Add` function.
   - Upgrade to `v1.0.1` and then use the `Subtract` function.

4. **Using go mod vendor**
   - Run `go mod vendor` in your consumer project.
   - Delete your internet connection and try building the project with `go build -mod=vendor`.  
   - Observe how the project still builds successfully.

5. **Exploring go.sum**
   - Open your `go.sum` file and identify the checksum entries for your `calculator` module.
   - Explain in your own words how this file prevents tampering.

---


